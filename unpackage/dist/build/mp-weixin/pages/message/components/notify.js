"use strict";const e=require("../../../common/vendor.js"),a=require("../../../api/message.js");if(require("../../../api/uni-fetch.js"),require("../../../stores/counter.js"),!Array){e.resolveComponent("uni-card")()}Math;const t={__name:"notify",setup(t){const l=e.ref(!1),u=e.ref(!1),n=e.ref(!1),o=e.ref({contentType:"201",page:0,pageSize:5}),s=e.ref([]),r=async()=>{try{o.value.page+=1;let e=await a.getMessage(o.value);1===o.value.page&&(s.value=[]),s.value=[...s.value,...e.data.items||[]],u.value=o.value.page==e.data.pages,l.value=0===s.value.length}catch(e){console.log(e)}};e.onMounted((()=>{r()}));const v=()=>{u.value||r()},c=async()=>{n.value=!0,o.value.page=0,await r(),n.value=!1},i=async()=>{try{await a.getReadAll(o.value.contentType);o.value.page=0,r()}catch(e){console.log(e)}};return(a,t)=>e.e({a:s.value.length>0},s.value.length>0?e.e({b:e.o(i),c:e.f(s.value,((a,t,l)=>({a:e.t(a.title),b:0===a.isRead?1:"",c:e.t(a.content),d:e.t(a.created),e:`/subpkg_task/detail/index?id=${a.id}`,f:t,g:"beee3ed6-0-"+l}))),d:e.p({"is-shadow":!1}),e:u.value},(u.value,{})):{},{f:l.value},(l.value,{}),{g:n.value,h:e.o(c),i:e.o(v)})}};wx.createComponent(t);
