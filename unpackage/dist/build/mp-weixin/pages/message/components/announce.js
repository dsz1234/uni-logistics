"use strict";const e=require("../../../common/vendor.js"),a=require("../../../api/message.js");if(require("../../../api/uni-fetch.js"),require("../../../stores/counter.js"),!Array){(e.resolveComponent("uni-list-item")+e.resolveComponent("uni-list"))()}Math||((()=>"../../../uni_modules/uni-list/components/uni-list-item/uni-list-item.js")+(()=>"../../../uni_modules/uni-list/components/uni-list/uni-list.js"))();const t={__name:"announce",setup(t){const l=e.ref(!1),n=e.ref(!1),u=e.ref(!1),i=e.ref({contentType:"200",page:0,pageSize:5}),s=e.ref({}),o=e.ref([]),r=async()=>{try{i.value.page+=1;let e=await a.getMessage(i.value);1===i.value.page&&(o.value=[]),s.value=e.data,o.value=[...o.value,...e.data.items||[]],n.value=i.value.page==s.value.pages,l.value=0===o.value.length}catch(e){console.log(e)}};e.onMounted((()=>{r()}));const c=()=>{n.value||r()},v=async()=>{u.value=!0,i.value.page=0,await r(),u.value=!1},p=async()=>{try{await a.getReadAll(i.value.contentType);i.value.page=0,r()}catch(e){console.log(e)}};return(a,t)=>e.e({a:o.value.length>0},o.value.length>0?{b:e.o(p),c:e.f(o.value,((a,t,l)=>e.e({a:0===a.isRead},(a.isRead,{}),{b:a.id,c:"db0d5e96-1-"+l+",db0d5e96-0",d:e.p({title:a.title,"right-text":a.created,ellipsis:"1",to:`/subpkg_user/content/index?id=${a.id}`})})))}:{},{d:l.value},(l.value,{}),{e:u.value,f:e.o(v),g:e.o(c)})}};wx.createComponent(t);
