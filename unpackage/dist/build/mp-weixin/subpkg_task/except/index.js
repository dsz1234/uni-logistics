"use strict";const e=require("../../common/vendor.js"),i=require("../../api/task.js");if(require("../../api/uni-fetch.js"),require("../../stores/counter.js"),!Array){(e.resolveComponent("uni-datetime-picker")+e.resolveComponent("uni-list-item")+e.resolveComponent("uni-file-picker")+e.resolveComponent("uni-list")+e.resolveComponent("uni-popup"))()}Math||((()=>"../../uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker.js")+(()=>"../../uni_modules/uni-list/components/uni-list-item/uni-list-item.js")+(()=>"../../uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker.js")+(()=>"../../uni_modules/uni-list/components/uni-list/uni-list.js")+(()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js"))();const t={__name:"index",setup(t){const o=e.ref("");e.onLoad((e=>{o.value=e.id}));const n=e.ref(""),u=e.computed((()=>n.value||"请选择")),l=e.ref(""),a=async()=>{try{const{address:i}=await e.index.chooseLocation({});l.value=i}catch(i){console.log(i)}},p=e.ref(""),s=e.ref(""),r=()=>{s.value.open()},c=["发动机启动困难","不着车，漏油","照明失灵","排烟异常、温度异常","其他问题"],m=[],d=e=>{m.push(e.detail.value[0])},v=()=>{s.value.close(),p.value=m.join("|")},f=e.ref(""),k=e.ref([]),h=e.computed((()=>k.value.map((e=>({url:e.url}))))),x=async()=>{try{const t={transportTaskId:o.value,exceptionTime:u.value,exceptionPlace:l.value,exceptionType:p.value,exceptionImagesList:h.value};await i.reportException(t);e.index.reLaunch({url:"/pages/task/index"})}catch(t){console.log(t)}};return(i,t)=>({a:e.t(e.unref(u)),b:e.o((e=>n.value=e)),c:e.p({modelValue:n.value}),d:e.p({title:"异常时间","right-text":"请选择","show-arrow":""}),e:e.o(a),f:e.p({clickable:!0,title:"上报位置","right-text":l.value||"请选择","show-arrow":!0}),g:e.o(r),h:e.p({clickable:!0,title:"异常类型","right-text":p.value||"请选择","show-arrow":!0}),i:f.value,j:e.o((e=>f.value=e.detail.value)),k:e.p({title:"异常描述"}),l:e.o((e=>k.value=e)),m:e.p({"file-extname":"jpg,webp,gif,png",limit:"3",modelValue:k.value}),n:e.p({title:"上传图片(最多3张)",direction:"column"}),o:e.o(x),p:e.f(c,((i,t,o)=>({a:i,b:e.o(d,t),c:t,d:"608e43dd-10-"+o+",608e43dd-9",e:e.p({title:i})}))),q:e.o(v),r:e.sr(s,"608e43dd-8",{k:"popup"}),s:e.p({type:"bottom"})})}};wx.createPage(t);
