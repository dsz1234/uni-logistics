"use strict";const e=require("../common/vendor.js"),t=require("../stores/counter.js"),s=["pages/task/index","pages/message/index","pages/my/index"],r=e.createUniFetch_1({loading:{title:"加载中..."},baseURL:"https://slwl-api.itheima.net",intercept:{request(e){const s={Authorization:t.useUserStore().token};return e.header=Object.assign({},s,e.header),e},response(t){if(200===t.statusCode&&200===t.data.code)return t.data;if(401===t.statusCode){const t=getCurrentPages();console.log("pageStack",t);const r=t[t.length-1].route,n=s.includes(r)?"switchTab":"redirectTo";return e.index.redirectTo({url:`/pages/login/index?routeType=${n}&redirectUrl=/${r}`})}e.index.utils.toast(t.data.msg||"请求失败")}}});exports.uniFetch=r;
